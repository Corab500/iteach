<#include "/lib/layout.html">

<@layout_std pageId="accounts" script=true modules = [] breadcrumbs = {loc("page.index"): ""}>

    <@usermessage closeable=true/>

	<table class="table table-striped table-hover">
		<thead>
			<tr>
				<th>&nbsp;</th>
				<th><@lh key="user.lastName" /></th>
				<th><@lh key="user.firstName" /></th>
				<th><@lh key="user.email" /></th>
				<th><@lh key="admin.accounts.mode" /></th>
				<th><@lh key="profile.administrator" /></th>
				<th><@lh key="admin.accounts.verified" /></th>
				<th><@lh key="profile.schoolCount" /></th>
				<th><@lh key="profile.studentCount" /></th>
				<th><@lh key="profile.lessonCount" /></th>
			</tr>
		</thead>
		<tbody>
			<#list accounts as account>
				<#assign classes="" />
				<#if !account.verified>
					<#assign classes = "error" />
				</#if>
				<tr class="${classes}">
					<td>
						<#if account.self>
							&#9658;
						</#if>
					</td>
					<td><button type="button" class="btn-link" onclick="Accounts.displayActions(${account.id})">${account.lastName?html}</button></td>
					<td><button type="button" class="btn-link" onclick="Accounts.displayActions(${account.id})">${account.firstName?html}</button></td>
					<td><a href="mailto:${account.email?html}">${account.email?html}</a></td>
					<td><@lh key= "admin.accounts.mode." + account.mode /></td>
					<td><@yes_no value=account.admin /></td>
					<td><@yes_no value=account.verified /></td>
					<td>${account.schoolCount}</td>
					<td>${account.studentCount}</td>
					<td>${account.lessonCount}</td>
				</tr>
                <tr id="actions-${account.id}" class="info hidden">
                    <td colspan="4">&nbsp;</td>
                    <td colspan="6">
                        <#if !account.admin>
                            <a href="admin/account/${account.id}/delete" class="btn btn-link"><i class="icon-trash"></i> <@lh key="general.delete"/></a>
                        </#if>
                        <a class="btn btn-link" href="admin/account/${account.id}/export"><i class="icon-download"></i> <@lh key="admin.accounts.export"/></a>
                        <a class="btn btn-link" href="admin/account/${account.id}/import"><i class="icon-upload"></i> <@lh key="admin.accounts.import"/></a>
                    </td>
                </tr>
			</#list>
		</tbody>
	</table>
    <a href="gui/home" class="btn"><@lh key="general.close" /></a>
</@layout_std>