<#include "/lib/layout.html">

<@layout_std pageId="profile" modules=["data"] breadcrumbs = {loc("page.index"): "", loc("page.home"): "gui/home"}>

	<@usermessage/>

    <div class="accordion" id="accordion">
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#general">
                    <@lh key="profile.data" />
                </a>
            </div>
            <div id="general" class="accordion-body collapse">
                <div class="accordion-inner">
                    <table class="data">
                        <tbody>
                        <tr>
                            <td class="data-label"><@lh key="user.firstName" /></td>
                            <td class="data-value">${profile.firstName?html}</td>
                        </tr>
                        <tr>
                            <td class="data-label"><@lh key="user.lastName" /></td>
                            <td class="data-value">${profile.lastName?html}</td>
                        </tr>
                        <tr>
                            <td class="data-label"><@lh key="user.email" /></td>
                            <td class="data-value">${profile.email?html}</td>
                        </tr>
                        <tr>
                            <td class="data-label"><@lh key="profile.administrator" /></td>
                            <td class="data-value"><@yes_no value=profile.admin /></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#stats">
                    <@lh key="profile.stats" />
                </a>
            </div>
            <div id="stats" class="accordion-body collapse">
                <div class="accordion-inner">
                    <table class="data">
                        <tbody>
                        <tr>
                            <td class="data-label"><@lh key="profile.schoolCount"/></td>
                            <td class="data-value">${profile.schoolCount}</td>
                        </tr>
                        <tr>
                            <td class="data-label"><@lh key="profile.studentCount"/></td>
                            <td class="data-value">${profile.studentCount}</td>
                        </tr>
                        <tr>
                            <td class="data-label"><@lh key="profile.lessonCount"/></td>
                            <td class="data-value">${profile.lessonCount}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <#if profile.mode == "password">
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#account">
                        <@lh key="profile.account" />
                    </a>
                </div>
                <div id="account" class="accordion-body collapse">
                    <div class="accordion-inner">
                        <#if profile.mode == "password">
                            <p>
                                <a href="gui/profile/password" class="btn btn-info"><@lh key="profile.changePassword" /></a>
                                <span class="help-inline"><@lh key="profile.changePassword.help" /></span>
                            </p>
                        </#if>
                    </div>
                </div>
            </div>
        </#if>
        <div class="accordion-group">
            <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#preferences">
                    <@lh key="profile.preferences" />
                </a>
            </div>
            <div id="preferences" class="accordion-body collapse in">
                <div class="accordion-inner">
                    <form action="gui/profile/preferences" method="POST" class="form-horizontal">
                        <div class="control-group">
                            <label class="control-label" for="PLANNING_WEEKEND"><@lh key="profile.preferences.weekend" /></label>
                            <div class="controls">
                                TODO Gets the value for the checkbox
                                <input id="PLANNING_WEEKEND" type="checkbox" name="PLANNING_WEEKEND" />
                            </div>
                        </div>
                        <div class="control-group">
                            <div class="controls">
                                <button type="submit" class="btn btn-primary">
                                    <@lh key="general.submit" />
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <a href="gui/home" class="btn"><@lh key="general.close"/></a>
</@layout_std>